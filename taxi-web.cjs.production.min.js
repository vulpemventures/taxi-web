"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t,a=require("react"),n=e(a),i=e(require("react-dom")),r=require("copy-lite"),s=require("taxi-protobuf/generated/js/TaxiServiceClientPb"),l=require("taxi-protobuf/generated/js/taxi_pb"),c=function(e){return n.createElement("button",{className:"button is-primary is-medium",onClick:e.onClick,disabled:e.disabled||!1},n.createElement("h1",{className:"title has-text-dark is-6"},e.children))},o=function(e){return n.createElement("button",{className:"button is-dark is-medium",style:{border:"none"},disabled:e.disabled||!1,onClick:e.onClick},n.createElement("h1",{className:"title is-6"},e.children))},m=require("./images/taxi.png"),u=(new Date).getFullYear(),d=function(e){var t,a;function i(){var t;return(t=e.apply(this,arguments)||this).state={selected:0},t}return a=e,(t=i).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,i.prototype.render=function(){var e=this,t=this.props.title?n.createElement("section",{className:"hero is-light"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"container"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column has-text-centered"},n.createElement("h1",{className:"title"},this.props.title)))))):null,a=this.props.menu&&this.props.menu.map((function(t,a){return n.createElement("div",{key:a,className:"navbar-item"},e.state.selected===a?n.createElement(c,null,t):n.createElement(o,{onClick:function(){e.props.onMenuChange(a),e.setState({selected:a})}},t))}));return n.createElement("div",{style:{minHeight:"100vh",position:"relative"}},t,n.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},n.createElement("div",{className:"navbar-brand ml-6"},n.createElement("a",{className:"navbar-item",href:"https://liquid.taxi"},n.createElement("img",{src:m,alt:"Liquid Taxi",style:{height:"48px"}}))),n.createElement("div",{className:"navbar-menu"},n.createElement("div",{className:"navbar-end"},a))),n.createElement("div",{style:{paddingTop:"5rem",paddingRight:"1rem",paddingLeft:"1rem",paddingBottom:"5rem"}},this.props.children),n.createElement("footer",{style:{position:"absolute",bottom:0,height:"5rem",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement("p",null,n.createElement("a",{href:"https://vulpem.com",target:"_blank",rel:"noopener noreferrer"},"© ",u," Vulpem Ventures OU")," - ",n.createElement("a",{href:"https://alissadeleva.com",target:"_blank",rel:"noopener noreferrer"},"Design by AD"))))},i}(n.Component),p=function(e){return n.createElement("button",{className:"button is-grey is-medium",disabled:!0},n.createElement("h1",{className:"title is-6 has-text-dark"},e.children))},h=function(e){return n.createElement("div",null,n.createElement("div",{className:"field has-addons"},n.createElement("input",{type:"text",readOnly:!!e.inputText,defaultValue:e.inputText,onChange:function(t){return e.onInputChange(t.target.value)},className:"input is-medium "+(e.hasError&&"is-danger"),placeholder:e.inputPlaceholder}),n.createElement("button",{className:"button is-primary is-medium",onClick:e.onButtonClick,disabled:e.buttonDisabled||!1},n.createElement("h1",{className:"title has-text-dark is-6"},e.buttonText))),e.hasError&&n.createElement("div",{className:"notification is-danger"},e.errorMessage))},E=require("../config.json"),b=process.env.USDT_ASSET_ID||E.USDT_ASSET_ID,f=process.env.TAXI_API_URL||E.TAXI_API_URL,N=function(e){var t=a.useState(!1),i=t[0],r=t[1],c=a.useState({}),o=c[0],m=c[1],u=a.useState(0),d=u[0],p=u[1];return i?n.createElement("h1",{className:"title is-3"},"Loading..."):n.createElement("div",null,!i&&Object.keys(o).length>0?n.createElement(g,{topup:o,expiryTimestamp:d}):n.createElement("div",{className:"container"},n.createElement("h1",{className:"title is-3 mt-6 mb-6"},"Top-up with Liquid Tether"),n.createElement("p",{className:"subtitle is-6"},"1. Request a partial signed transaction. This includes Liquid Bitcoin for the fees"),n.createElement("p",{className:"subtitle is-6"},"2. Import in your wallet and adds your USDt inputs and outputs"," "),n.createElement("p",{className:"subtitle is-6"},"3. Broadcats the final transaction to the network within the expiration time (by default 3 minutes)."," "),n.createElement(v,{onClick:function(t){if(t.preventDefault(),!i){r(!0);var a=new s.TaxiClient(f),n=new l.TopupWithAssetRequest;n.setAssetHash(b),a.topupWithAsset(n,null).then((function(t){var a=t.getTopup(),n=t.getExpiry();if(!a)return e.onError("Internal error");m(a.toObject()),p(n)})).catch((function(t){return e.onError(t.message||JSON.stringify(t))})),r(!1)}}})))},v=function(e){return n.createElement("div",{className:"has-text-centered"},n.createElement(c,{onClick:e.onClick},"Request a Topup"))},g=function(e){var t=e.topup,i=e.expiryTimestamp,s=t.assetAmount/Math.pow(10,8),l=t.assetSpread/Math.pow(10,8),o=new Date(1e3*i),m=a.useState(""),u=m[0],d=m[1],E=a.useState(!1),b=E[0],f=E[1],N=a.useState(!1),v=N[0],g=N[1];return n.createElement("div",null,n.createElement("div",{className:"has-text-centered"},n.createElement("p",{className:"subtitle is-6 mt-6"},"ORDER ",t.topupId),n.createElement("h1",{className:"title is-3 mt-6 mb-3"},s+" USDt"),n.createElement("p",{className:"subtitle is-6"},n.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),f(!b)}},(b?"Hide":"View")+" details")),b&&n.createElement("div",{className:"notification is-warning has-text-left"},n.createElement("p",{className:"subtitle is-6"},"Amount to be paid (Liquid Tether): ",s," USDt"),n.createElement("p",{className:"subtitle is-6"},"Taxi service fee (Liquid Tether): ",l," USDt"),n.createElement("p",{className:"subtitle is-6"},"On-chain fees (Liquid Bitcoin): 0.00001 L-BTC")),n.createElement("img",{src:require("../images/success.png"),alt:"success icon after a topup with Liquid.Taxi"}),n.createElement("h1",{className:"title is-5 mt-3 mb-6"}," Topup completed"),n.createElement("h1",{className:"title is-6 mt-6 has-text-left"},"Transaction with L-BTC fees"),n.createElement(h,{buttonText:u.length>0?u:"Copy",inputText:t.partial,onButtonClick:function(){return r.copyToClipboard(t.partial),d("✅ Copied!"),void setTimeout((function(){return d("")}),1500)}}),n.createElement("p",{className:"subtitle is-6 mt-6"},"You have until"," ",n.createElement("b",null," ",o.toLocaleTimeString()+" of "+o.toLocaleDateString()," ")," ","to fund the transaction with enough Liquid Tether to cover the\n          fee of "+s+" USDt and broadcast it through the Liquid Network."),n.createElement(c,{onClick:function(e){e.preventDefault(),g(!v)}},"Import into Liquid.Coach"),n.createElement(p,null,"Open with Marina ")),v&&n.createElement("div",{className:"container"},n.createElement("h1",{className:"title is-3 mt-6 mb-6"},"How to import a topup with Liquid.Coach"),n.createElement("p",{className:"subtitle is-6"},"1. Go to"," ",n.createElement("a",{href:"https://liquid.coach",target:"_blank",rel:"noreferrer"},"Liquid.Coach")," "),n.createElement("p",{className:"subtitle is-6"},"2. Paste your address holding USDt or generate a Liquid wallet in the browser"),n.createElement("p",{className:"subtitle is-6"},"3. Click on ",n.createElement("b",null,"Import")," and copy-paste the"," ",n.createElement("b",null,"Transaction with L-BTC fees")," above"),n.createElement("p",{className:"subtitle is-6"},"4. ",n.createElement("b",null,"Inputs:")," Add your USDt input(s) selecting from the select box"),n.createElement("p",{className:"subtitle is-6"},"5. ",n.createElement("b",null,"Outputs:")," Add you USDt output(s), like the receiver output and the eventual USDt change"),n.createElement("p",{className:"subtitle is-6"},"6. Click on ",n.createElement("b",null,"Encode")," and then ",n.createElement("b",null,"Sign")," and paste your mnemonic phrase"),n.createElement("p",{className:"subtitle is-6"},"7. Broadcast the resulting hex encoded transaction")))},y=function(){return n.createElement("h1",{className:"title has-text-centered mt-6"},"Coming soon")},T=function(e){return n.createElement("button",{className:"button is-dark is-medium",style:{borderColor:"#fdfffc"},disabled:e.disabled||!1,onClick:e.onClick},n.createElement("h1",{className:"title is-6"},e.children))},S=function(e){var t=a.useState(e.defaultIndex||0),i=t[0],r=t[1],s=e.values.map((function(t,a){return i===a?n.createElement(c,{key:a},t):n.createElement(T,{key:a,onClick:function(){return function(t){e.onChange(t),r(t)}(a)}},t)}));return n.createElement("div",{className:"buttons has-addons is-centered"},s)},C=require("../images/taxi.png"),k=function(){return n.createElement("section",{className:"hero hero-body-padding-small is-medium"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column pl-6"},n.createElement("h1",{className:"title is-3 mt-6"},"Liquid Taxi"),n.createElement("p",{className:"subtitle is-5 mt-3 mb-6"},"Move around your Liquid assets without L-BTC. Pay per use with USDt or buy a prepaid package to get an API KEY")),n.createElement("div",{className:"column is-centered has-text-centered"},n.createElement("img",{src:C,alt:"Liquid Taxi"})))))},x=["Pay with USDt","Use API KEY"];!function(e){e[e.ASSET=1]="ASSET",e[e.LN=2]="LN"}(t||(t={})),i.render(n.createElement((function(){var e=a.useState(t.ASSET),i=e[0],r=e[1],s=a.useState(""),l=s[0],c=s[1];return n.createElement(d,{menu:["Top-up"]},n.createElement(k,null),n.createElement("div",{className:"container"},l.length>0&&n.createElement("div",{className:"notification is-danger is-large"}," ",n.createElement("button",{className:"delete is-large",onClick:function(){return c("")}}),l),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column is-6-desktop is-offset-3-desktop"},n.createElement(S,{onChange:function(e){return r(e+1)},values:x}),i===t.ASSET?n.createElement(N,{onError:function(e){return c(e)}}):n.createElement(y,null)))))}),null),document.getElementById("root"));
//# sourceMappingURL=taxi-web.cjs.production.min.js.map
